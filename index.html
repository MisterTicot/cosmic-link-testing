<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">

  <script>
    /*** Immediate redirection when possible ***/
    var authenticators = {
      'Stellar Authenticator': 'https://stellar-authenticator.org/',

      /** Backward compatibility **/
      'stellarAuthenticator': 'https://stellar-authenticator.org'
    }

    function getAuthenticatorUrl(){
      return authenticators[localStorage.authenticator]
    }

    if (
      localStorage.redirect === 'true' &&
      location.search.length > 1 &&
      getAuthenticatorUrl()
    ) {
      location.replace(getAuthenticatorUrl() + location.search)
    } else {
      history.replaceState({}, '',
        location.pathname.replace(/[^\/]*$/,'') + location.search)
    }
  </script>

  <title>Cosmic.Link ~ Stellar transactions over URL</title>
  <meta property="og:title" content="Cosmic.Link ~ Stellar transactions over URL">
  <meta property="og:description" name="description" content="Cosmic.Link
    provides a convenient way to share Stellar transactions as URLs.">

  <meta property="og:image" content="https://cosmic.link/icons/512x512.png">
  <meta property="og:image:height" content="512">
  <meta property="og:image:width" content="512">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="msapplication-config" content="browserconfig.xml">
  <meta name="msapplication-TileColor" content="#2b5797">

  <link rel="shortcut icon" href="icons/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="icons/16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icons/32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="icons/96x96.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
  <link rel="mask-icon" href="icons/safari.svg" color="#5bbad5">

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" type="text/css" href="main.css">
</head>

<body id="body" onload="lib.init()">

  <header onclick="lib.copyContent(this)">
    <h1 id="websiteUrl">=(G_G)=</h1><span id="query"></span>
  </header>

  <img id="logo" src="icons/512x512.png" alt="">

  <main>
    <div id="sign" class="page">
      <h2>You're being offered to sign a Stellar transaction</h2>
      <aside><a href="javascript:lib.switchPage(sign, explanation)">What does that mean?</a></aside>

      <hr>

      <h3>Step 1: Check the transaction</h3>
      <div id="cosmiclink_description">
        Loading... <span class="cosmiclib_loadingAnim"></span>
      </div>

      <hr>

      <h3>Step 2: Select a Signing Method</h3>
      <form onsubmit="return false">
        <select id="authenticators">
          <option value="" disabled selected hidden>Loading...</option>
        </select>
        <div id="accountDiv" style="display:none">
          <input id="accountIdBox" type="text">
        </div>
        <div id="networkDiv">
          <div id="networkSelector">
            <input id="publicNetwork" type="radio" name="network" value="public">
            <label for="publicNetwork">Public network</label>
            <input id="testNetwork" type="radio" name="network" value="test">
            <label for="testNetwork">Test network</label>
            <input id="customNetwork" type="radio" name="network" value="custom">
            <label for="customNetwork">Custom network</label>
          </div>
          <div id="customNetworkSetup" style="display:none">
            <input id="customPassphrase" type="text" placeholder="Network Passphrase or Name">
            <input id="customHorizon" type="text" placeholder="Horizon URL">
          </div>
        </div>
        <div id="accountMsgbox"></div>
      </form>

      <hr>

      <h3>Step 3: Sign the Transaction</h3>

      <form id="redirectionForm">
        <input id="redirectionButton" type="button" value="â€¦" disabled>
        <input id="redirectionCheckbox" type="checkbox">
        <label for="redirectionCheckbox">Automatic redirection</label>
        <div id="redirectionMsgbox"></div>
      </form>

      <form id="textareaForm" style="display:none">
        <textarea id="xdrBox" rows="3"></textarea>
      </form>

      <form id="qrForm" style="display:none">
          <input id="qrButton" type="button" value="QR Code">
          <div id="qrCode" style="display:none"></div>
      </form>
    </div>
  </main>

  <div id="explanation" class="page">
    <h2>Warm welcome to the Stellar network!</h2>
    <hr>

    <p>
      The Stellar network is a cryptocurrency platform on which we can
      create accounts and perform transactions. It's a bit like a bank,
      except it's public and decentralized.
    </p>
    <p>
      Because it's public, each of us can contribute to the network by
      various means, like programing services such as this one. We can
      also emit our own currencies or tokens, build secure voting systems
      and other things to be invented. :)
    </p>
    <p>
      Because it's properly decentralized, it's protected from anybody
      that could want to disrupt or hijack the network for its own
      benefit. Our funds are secured by cryptographic algorithms and
      resilience. Resilience means that several nodes on the network
      have a full copy of the data, and that the various independent
      nodes have to agree together for the transactions to be performed.
    </p>
    <p>
      In order to sign a Stellar transaction, you need to have an
      account with a minimum amount of the native currency, called
      lumen (XLM). At this time, the minimum amount is 1 lumen, valued
      between $.20 and $.50. Once in, you'll be able to close your
      account and get your money back at any time, if you wish to do so.
    </p>
    <p>
      Cosmic links are normal web links that describe a Stellar
      transaction. When you click on them and own a Stellar account,
      you're given the possibility to sign and send the transaction to
      the network. Those transactions are for payment but also for
      currency conversion, change in account settings or sending short
      messages. Cosmic links may looks like:
      https://cosmic.link/?setOption&...
    </p>
    <p>
      The Stellar network and core programs are maintained by the Stellar
      Foundation. Their
      <a href="https://stellar.org" title="https://stellar.org"
        target="_blank" rel="noopener">website</a>
      is a good place to start if you want to learn more. <br>
      We also have a
      <a href="https://galactictalk.org" title="https://galactictalk.org"
        target="_blank" rel="noopener">community forum</a>.
    </p>
    <p>
      We wish you a happy discovery :)
    </p>

    <hr>
    <form>
      <input type="button" onclick="lib.switchPage(explanation, sign)"
        value="Back">
    </form>
  </div>

  <img id="tamper">

  <script src="stellar-sdk.js"></script>
  <script src="main.js"></script>
</body>
</html>
